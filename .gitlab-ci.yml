image: docker:27.3.1   # ðŸ”¥ newer client, API >= 1.44

stages:
  - build

variables:
  DOCKER_TLS_CERTDIR: ""   # avoid TLS issues inside GitLab runners

before_script:
  # Optional: just for debugging the environment
  - docker version
  - docker info

  # Login to Docker Hub (set these as CI/CD variables in GitLab)
  - echo "$DOCKERHUB_TOKEN" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin

build-and-push:
  stage: build
  script:
    # Build the image from your repoâ€™s Dockerfile
    - docker build -t "$DOCKERHUB_USERNAME/sam3d:latest" .

    # Push to Docker Hub
    - docker push "$DOCKERHUB_USERNAME/sam3d:latest"